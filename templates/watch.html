<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Video İzle</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
body{ margin:0; display:flex; height:100vh; align-items:center; justify-content:center; background:#111 }
.player{ position:relative; max-width:960px; width:95%; }
video{ width:100%; height:auto; display:block }
.overlay{
position:absolute; left:0; right:0; top:10px; text-align:center; pointer-events:none;
font-size:28px; font-weight:700; color:white; text-shadow: 2px 2px 6px rgba(0,0,0,0.8);
}
</style>
</head>
<body>
<div class="player">
<div class="overlay">burak tatlından selamlar</div>
<video id="videoPlayer" playsinline controls autoplay>
<source src="{{ video_url }}" />
Tarayıcınız video etiketini desteklemiyor.
</video>
</div>


<script>
(function(){
const video = document.getElementById('videoPlayer');
const repeats = {{ repeats }}; // 0 -> sonsuz loop


if(repeats === 0){
video.loop = true; // sonsuz döngü
} else {
let played = 0;
video.addEventListener('ended', function(){
played += 1;
if(played < repeats){
video.currentTime = 0;
video.play();
}
});
}
})();
</script>
</body>
</html>